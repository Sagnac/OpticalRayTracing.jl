<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Vignetting Analysis · OpticalRayTracing.jl</title><meta name="title" content="Vignetting Analysis · OpticalRayTracing.jl"/><meta property="og:title" content="Vignetting Analysis · OpticalRayTracing.jl"/><meta property="twitter:title" content="Vignetting Analysis · OpticalRayTracing.jl"/><meta name="description" content="Documentation for OpticalRayTracing.jl."/><meta property="og:description" content="Documentation for OpticalRayTracing.jl."/><meta property="twitter:description" content="Documentation for OpticalRayTracing.jl."/><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../search_index.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../"><img src="../assets/logo.png" alt="OpticalRayTracing.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../">OpticalRayTracing.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../">OpticalRayTracing.jl</a></li><li><a class="tocitem" href="../Paraxial Ray Tracing/">Paraxial Ray Tracing</a></li><li><a class="tocitem" href="../Real Ray Tracing/">Real Ray Tracing</a></li><li><a class="tocitem" href="../Aspheric Surfaces/">Aspheric Surfaces</a></li><li class="is-active"><a class="tocitem" href>Vignetting Analysis</a></li><li><a class="tocitem" href="../Seidel Aberrations/">Seidel Aberrations</a></li><li><a class="tocitem" href="../Optimization/">Optimization</a></li><li><a class="tocitem" href="../Plotting Examples/">Plotting Examples</a></li><li><a class="tocitem" href="../API/">API</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Vignetting Analysis</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Vignetting Analysis</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/Sagnac/OpticalRayTracing.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/Sagnac/OpticalRayTracing.jl/blob/master/docs/src/Vignetting Analysis.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Vignetting-Analysis"><a class="docs-heading-anchor" href="#Vignetting-Analysis">Vignetting Analysis</a><a id="Vignetting-Analysis-1"></a><a class="docs-heading-anchor-permalink" href="#Vignetting-Analysis" title="Permalink"></a></h1><p>Given a system or ray bundle and a set of apertures this package provides a basic tool for evaluating vignetting criteria at each aperture. Along with identifying, by index, which apertures cause partial or full vignetting, the returned <code>Vignetting</code> data structure holds a 5 column semi-diameter matrix in its <code>M</code> field which contains:</p><ul><li>The provided aperture size;</li><li>The marginal ray limit: the size at which the aperture becomes the stop due to limiting the on-axis ray bundle;</li><li>The size necessary for no vignetting to occur;</li><li>The size at which the half-vignetting condition is satisified;</li><li>The size at which the aperture clips the entire off-axis ray bundle; this is the minimum aperture size at which the given field of view is still supported down to approximately zero irradiance.</li></ul><p>In addition, the maximum system field of view for the unvignetted, half-vignetted, and fully-vignetted cases is determined for the input aperture sizes.</p><p>Querying the <code>FOV</code> field extracts the maximum supported full fields of view in degrees, paraxial principal ray slopes, and the corresponding image heights for all three vignetting conditions as a matrix with the rows corresponding to the conditions and the columns to the fields, slopes, and heights, respectively.</p><p>In essence, the <code>M</code> matrix represents the supported aperture sizes for each case given the system field of view and the <code>FOV</code> matrix corresponds to the maximal fields for the given aperture sizes.</p><p>Any <code>NaN</code>s in the <code>M</code> matrix signify that there is no possible size which fits the criteria due to the aforementioned limiting factor.</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; vig = vignetting(system)</code><code class="nohighlight hljs ansi" style="display:block;"><span class="sgr33"><span class="sgr1">Partially vignetted:</span></span>
[1, 2, 3, 7, 8]

Maximum supported FOVs:
Unvignetted: 6.0997°, h′: 2.7060
Half-vignetted: 93.5337°, h′: 54.0216
Fully-vignetted: 128.5177°, h′: 105.3371

<span class="sgr36"><span class="sgr1">a       limit    un       half     full</span></span>
8×5 Matrix{Float64}:
 9.5   9.02413  12.805    NaN  NaN
 9.5   8.27315  10.8017   NaN  NaN
 9.0   7.59772   9.0471   NaN  NaN
 9.0   7.48453   8.65861  NaN  NaN
 7.63  7.63      7.63     NaN  NaN
 8.5   7.68614   8.13925  NaN  NaN
 8.5   7.77516   8.94668  NaN  NaN
 8.5   7.82878  10.2157   NaN  NaN</code></pre><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; # FOVs, slopes, heights
       vig.FOV</code><code class="nohighlight hljs ansi" style="display:block;">3×3 Matrix{Float64}:
   6.09972  0.0532804    2.70603
  93.5337   1.06366     54.0216
 128.518    2.07403    105.337</code></pre><p>There is support for analyzing a traced <code>RayBasis</code> instead using the <code>vignetting(rays::RayBasis, system::System, a::AbstractVector)</code> method.</p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../Aspheric Surfaces/">« Aspheric Surfaces</a><a class="docs-footer-nextpage" href="../Seidel Aberrations/">Seidel Aberrations »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.16.1 on <span class="colophon-date" title="Wednesday 26 November 2025 05:30">Wednesday 26 November 2025</span>. Using Julia version 1.12.2.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
